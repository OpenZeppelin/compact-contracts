= ERC20

This module provides the full ERC20 API.

== Module

[.contract]
[[ERC20]]
=== `++ERC20++`

[.contract-index]
.Circuits
--
[.sub-index#ERC20Module]
* xref:#ERC20Module-initializer[`++initializer(name_, symabol_, decimals_)++`]
* xref:#ERC20Module-name[`++name()++`]
* xref:#ERC20Module-symbol[`++symbol()++`]
* xref:#ERC20Module-decimals[`++decimals()++`]
* xref:#ERC20Module-totalSupply[`++totalSupply()++`]
* xref:#ERC20Module-balanceOf[`++balanceOf(account)++`]
* xref:#ERC20Module-allowance[`++allowance(owner, spender)++`]
* xref:#ERC20Module-transfer[`++transfer(to, value)++`]
* xref:#ERC20Module-transferFrom[`++transferFrom(from, to, value)++`]
* xref:#ERC20Module-approve[`++approve(spender, value)++`]
* xref:#ERC20Module-_approve[`++_approve(owner, spender, value)++`]
* xref:#ERC20Module-approve[`++_transfer(from, to, value)++`]
* xref:#ERC20Module-_mint[`++_mint(account, value)++`]
* xref:#ERC20Module-_burn[`++_burn(account, value)++`]
* xref:#ERC20Module-_update[`++_update(from, to, value)++`]
* xref:#ERC20Module-approve[`++_spendAllowance(owner, spender, value)++`]

--

[.contract-item]
[[ERC20Module-initializer]]
==== `[.contract-item-name]#++initializer++#++(name_: Maybe<Opaque<"string">>, symabol_: Maybe<Opaque<"string">>, decimals_: Uint<8>) → []++` [.item-kind]#circuit#

Initializes the contract by setting the name, symbol, and decimals.
This MUST be called in the implementing contract's constructor.
Failure to do so can lead to an irreparable contract.

[.contract-item]
[[ERC20Module-name]]
==== `[.contract-item-name]#++name++#++() → Maybe<Opaque<"string">>++` [.item-kind]#circuit#

Returns the token name.

[.contract-item]
[[ERC20Module-symbol]]
==== `[.contract-item-name]#++symbol++#++() → Maybe<Opaque<"string">>++` [.item-kind]#circuit#

Returns the symbol of the token.

[.contract-item]
[[ERC20Module-decimals]]
==== `[.contract-item-name]#++decimals++#++() → Uint<8>++` [.item-kind]#circuit#

Returns the number of decimals used to get its user representation.

[.contract-item]
[[ERC20Module-totalSupply]]
==== `[.contract-item-name]#++totalSupply++#++() → Uint<128>++` [.item-kind]#circuit#

Returns the value of tokens in existence.

[.contract-item]
[[ERC20Module-balance_of]]
==== `[.contract-item-name]#++balance_of++#++(account: Either<ZswapCoinPublicKey, ContractAddress>) → Uint<128>++` [.item-kind]#circuit#

Returns the value of tokens owned by `account`.

[.contract-item]
[[ERC20Module-allowance]]
==== `[.contract-item-name]#++allowance++#++(owner: Either<ZswapCoinPublicKey, ContractAddress>, spender: Either<ZswapCoinPublicKey, ContractAddress>) → Uint<128>++` [.item-kind]#circuit#

Returns the remaining number of tokens that `spender` will be allowed to spend on behalf of `owner` through `transferFrom`.
This value changes when `approve` or `transferFrom` are called.

[.contract-item]
[[ERC20Module-transfer]]
==== `[.contract-item-name]#++transfer++#++(to: Either<ZswapCoinPublicKey, ContractAddress>, value: Uint<128>) → Boolean++` [.item-kind]#circuit#

 Moves a `value` amount of tokens from the caller's account to `to`.

[.contract-item]
[[ERC20Module-transferFrom]]
==== `[.contract-item-name]#++transferFrom++#++(from: Either<ZswapCoinPublicKey, ContractAddress>,, to: Either<ZswapCoinPublicKey, ContractAddress>, value: Uint<128>) → Boolean++` [.item-kind]#circuit#

Moves `value` tokens from `from` to `to` using the allowance mechanism.
`value` is the deducted from the caller's allowance.

[.contract-item]
[[ERC20Module-approve]]
==== `[.contract-item-name]#++approve++#++(spender: Either<ZswapCoinPublicKey, ContractAddress>, value: Uint<128>) → Boolean++` [.item-kind]#circuit#

Sets a `value` amount of tokens as allowance of `spender` over the caller's tokens.

[.contract-item]
[[ERC20Module-_approve]]
==== `[.contract-item-name]#++_approve++#++(owner: Either<ZswapCoinPublicKey, ContractAddress>, spender: Either<ZswapCoinPublicKey, ContractAddress>, value: Uint<128>) → []++` [.item-kind]#circuit#

Sets `value` as the allowance of `spender` over the ``owner``'s tokens.
This internal function is equivalent to `approve`, and can be used to e.g. set automatic allowances for certain subsystems, etc.

[.contract-item]
[[ERC20Module-_transfer]]
==== `[.contract-item-name]#++_transfer++#++(from: Either<ZswapCoinPublicKey, ContractAddress>, to: Either<ZswapCoinPublicKey, ContractAddress>, value: Uint<128>) → []++` [.item-kind]#circuit#

Moves a `value` amount of tokens from `from` to `to`.
This internal function is equivalent to {transfer}, and can be used to e.g. implement automatic token fees, slashing mechanisms, etc.

[.contract-item]
[[ERC20Module-_mint]]
==== `[.contract-item-name]#++_mint++#++(account: Either<ZswapCoinPublicKey, ContractAddress>, value: Uint<128>) → []++` [.item-kind]#circuit#

Creates a `value` amount of tokens and assigns them to `account`, by transferring it from the zero address.
Relies on the `update` mechanism.

[.contract-item]
[[ERC20Module-_burn]]
==== `[.contract-item-name]#++_burn++#++(account: Either<ZswapCoinPublicKey, ContractAddress>, value: Uint<128>) → []++` [.item-kind]#circuit#

Destroys a `value` amount of tokens from `account`, lowering the total supply.
Relies on the `_update` mechanism.

[.contract-item]
[[ERC20Module-_update]]
==== `[.contract-item-name]#++_update++#++(from: Either<ZswapCoinPublicKey, ContractAddress>, to: Either<ZswapCoinPublicKey, ContractAddress>, value: Uint<128>) → []++` [.item-kind]#circuit#

Transfers a `value` amount of tokens from `from` to `to`,
or alternatively mints (or burns) if `from` (or `to`) is the zero address.

[.contract-item]
[[ERC20Module-_spendAllowance]]
==== `[.contract-item-name]#++_spendAllowance++#++(owner: Either<ZswapCoinPublicKey, ContractAddress>, spender: Either<ZswapCoinPublicKey, ContractAddress>, value: Uint<128>) → []++` [.item-kind]#circuit#

Updates `owner`'s allowance for `spender` based on spent `value`.
Does not update the allowance value in case of infinite allowance.
